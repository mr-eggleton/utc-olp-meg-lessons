{{#extend "title" }} {{title }} {{/extend}} 

<article>
  {{{ content }}}
</article>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css">

<style>
  pre{
    background-color:#F0F0F0;
    border: 1px solid black;
  }
  code{
    background: #F0F0F0;
  }
</style>
<script>
  const sCopyLabel = "Copy";
  const sCopiedLabel = "Copied";
  const sNotCopiedLabel = "Not Copied";
  
  function copyCode(copyText) {
    /* Put the text into the clipboard */
    var buttons = document.getElementsByTagName("button")
    for(var i=0 ; i<buttons.length; i++){
      var button = buttons[i];
      if(button.innerText == sCopiedLabel || button.innerText == sNotCopiedLabel){
        button.innerText = sCopyLabel
      }
    }
    var clicked = this; 
      if ("clipboard" in navigator){
      navigator.clipboard.writeText(copyText).then(function() {
        clicked.innerText = sCopiedLabel
      }, function() {
        clicked.innerText = sNotCopiedLabel
        /* clipboard write failed */
      });
    }else{
      clicked.innerText = sNotCopiedLabel
    }
  }
  
    function copyCode2(textToCopy) {
      console.log("textToCopy", textToCopy)
    /* Put the text into the clipboard */
    var buttons = document.getElementsByTagName("button")
    for(var i=0 ; i<buttons.length; i++){
      var button = buttons[i];
      if(button.innerText == sCopiedLabel || button.innerText == sNotCopiedLabel){
        button.innerText = sCopyLabel
      }
    }
     var currentRange;
     if(document.getSelection().rangeCount > 0)
     {
          //the user has a text selection range, store it
          currentRange = document.getSelection().getRangeAt(0);
          //remove the current selection
          window.getSelection().removeRange(currentRange);
     }
     else
     {
          //they didn't have anything selected
          currentRange = false;
     }
      
      
   //create a selection range
     var CopyRange = document.createRange();
     //choose the element we want to select the text of
     CopyRange.selectNode(textToCopy);
     //select the text inside the range
     window.getSelection().addRange(CopyRange);
     //copy the text to the clipboard
     document.execCommand("copy");
 
     //remove our selection range
     window.getSelection().removeRange(CopyRange);
     this.innerText = sCopiedLabel
  }
  
  
  var eSnippets = document.getElementsByTagName("code");
  for(var i=0 ; i<eSnippets.length; i++){
    var ele = eSnippets[i];
    if(ele.textContent.length > 20){
      //console.log("ele", ele)
      var eButton = document.createElement("button");
      eButton.innerText = sCopyLabel
      //eButton.onclick = copyCode.bind(eButton, ele.textContent)
      eButton.onclick = copyCode2.bind(eButton, ele)
      var container = ele.parentNode;
      //console.log("container", container)
      if (container.tagName == "PRE"){
        container.parentNode.insertBefore(eButton, container)
      }
    }
  }
</script>

